<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Inspirasi Card - Test Standalone</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Ensure modal is on top of everything */
        #photoPreviewModal {
            z-index: 99999 !important;
        }

        /* Smooth transitions */
        .photo-carousel-container {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Prevent background scroll when modal open */
        body.modal-open {
            overflow: hidden;
            position: fixed;
            width: 100%;
        }

        /* Responsive adjustments */
        @media (max-width: 640px) {
            .photo-carousel-wrapper {
                height: 280px !important;
            }

            .action-btn span:last-child {
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-b from-purple-50 via-pink-50 to-sky-50 min-h-screen p-4">

<!-- Test Header -->
<div class="max-w-2xl mx-auto mb-6">
    <div class="bg-white rounded-lg shadow-md p-4">
        <h1 class="text-2xl font-bold text-purple-600 mb-2">ğŸ§ª Inspirasi Card - Test Page</h1>
        <p class="text-sm text-gray-600">Test semua fitur: carousel, swipe, modal preview, actions</p>
        <div class="mt-3 flex gap-2 text-xs">
            <span class="bg-green-100 text-green-700 px-2 py-1 rounded">âœ… Tailwind CSS</span>
            <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded">âœ… Vanilla JS</span>
            <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded">âœ… No Dependencies</span>
        </div>
    </div>
</div>

<!-- Container untuk Cards -->
<div class="max-w-2xl mx-auto space-y-4">

    <!-- ========================================
         TEST 1: Card dengan 2 Foto (Carousel)
         ======================================== -->
    <div class="inspirasi-card bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300">
        <div class="p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-t-xl">
            <p class="text-xs font-semibold text-purple-700">ğŸ§ª TEST 1: Card dengan 2 Foto (Carousel Aktif)</p>
        </div>

        <!-- Header: Profile, Name, Time, Menu -->
        <div class="card-header p-4 pb-3 flex items-center justify-between relative" style="z-index: 30;">
            <!-- Left: Profile Info -->
            <div class="flex items-center gap-3">
                <!-- Profile Photo -->
                <div class="w-10 h-10 rounded-full border-2 border-purple-500 overflow-hidden flex-shrink-0">
                    <img src="https://ui-avatars.com/api/?name=Faisal+Kassim&background=A855F7&color=fff&size=128"
                         alt="FAISAL KASSIM, S.Kom"
                         class="w-full h-full object-cover">
                </div>
                <!-- User Info -->
                <div>
                    <h3 class="font-semibold text-gray-900 text-sm">FAISAL KASSIM, S.Kom</h3>
                    <p class="text-xs text-gray-500">Baru saja</p>
                </div>
            </div>

            <!-- Right: Pin & Menu -->
            <div class="flex items-center gap-2">
                <!-- Save/Pin Button -->
                <button class="save-btn transition-transform hover:scale-110 text-gray-400 hover:text-yellow-500"
                        title="Simpan ke favorit"
                        onclick="toggleSave(this)">
                    <span class="text-xl">ğŸ”–</span>
                </button>

                <!-- Three Dots Menu -->
                <div class="menu-container relative">
                    <button class="menu-btn p-1.5 hover:bg-gray-100 rounded-full transition-colors"
                            onclick="toggleMenu(this)"
                            title="Opsi lainnya">
                        <svg class="w-5 h-5 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"/>
                        </svg>
                    </button>

                    <!-- Dropdown Menu -->
                    <div class="menu-dropdown hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-2xl border border-gray-200 py-1"
                         style="z-index: 40;">
                        <button class="w-full text-left px-4 py-2.5 hover:bg-gray-50 transition-colors flex items-center gap-3 text-gray-700"
                                onclick="editInspirasi()">
                            <span class="text-lg">âœï¸</span>
                            <span class="text-sm font-medium">Edit Inspirasi</span>
                        </button>
                        <button class="w-full text-left px-4 py-2.5 hover:bg-red-50 transition-colors flex items-center gap-3 text-red-600"
                                onclick="hapusInspirasi()">
                            <span class="text-lg">ğŸ—‘ï¸</span>
                            <span class="text-sm font-medium">Hapus Inspirasi</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Photo Carousel Section -->
        <div class="photo-section px-4 pb-3 relative" style="z-index: 20;">
            <div class="photo-carousel-wrapper relative rounded-lg overflow-hidden bg-gray-50" style="height: 320px;">

                <!-- Photos Container -->
                <div class="photo-carousel-container flex transition-transform duration-300 ease-out h-full"
                     data-current="0"
                     style="width: 200%;">

                    <!-- Photo 1 -->
                    <div class="photo-slide flex-shrink-0 h-full" style="width: 50%;">
                        <img src="https://images.unsplash.com/photo-1511688878353-3a2f5be94cd7?w=600&h=400&fit=crop"
                             alt="Inspirasi 1"
                             class="w-full h-full object-cover cursor-pointer hover:opacity-95 transition-opacity"
                             onclick="openPhotoPreview('https://images.unsplash.com/photo-1511688878353-3a2f5be94cd7?w=1200&h=800&fit=crop')"
                             loading="lazy">
                    </div>

                    <!-- Photo 2 -->
                    <div class="photo-slide flex-shrink-0 h-full" style="width: 50%;">
                        <img src="https://images.unsplash.com/photo-1533090161767-e6ffed986c88?w=600&h=400&fit=crop"
                             alt="Inspirasi 2"
                             class="w-full h-full object-cover cursor-pointer hover:opacity-95 transition-opacity"
                             onclick="openPhotoPreview('https://images.unsplash.com/photo-1533090161767-e6ffed986c88?w=1200&h=800&fit=crop')"
                             loading="lazy">
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="carousel-nav absolute inset-0 flex items-center justify-between px-3 pointer-events-none" style="z-index: 25;">
                    <button class="nav-btn prev-btn pointer-events-auto w-9 h-9 rounded-full bg-white/90 backdrop-blur-sm shadow-lg hover:bg-white transition-all flex items-center justify-center text-gray-700 hover:scale-110 active:scale-95"
                            onclick="prevPhoto(this)"
                            title="Foto sebelumnya">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <button class="nav-btn next-btn pointer-events-auto w-9 h-9 rounded-full bg-white/90 backdrop-blur-sm shadow-lg hover:bg-white transition-all flex items-center justify-center text-gray-700 hover:scale-110 active:scale-95"
                            onclick="nextPhoto(this)"
                            title="Foto berikutnya">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>

                <!-- Dots Indicator -->
                <div class="carousel-dots absolute bottom-3 left-1/2 transform -translate-x-1/2 flex gap-2" style="z-index: 25;">
                    <div class="dot w-2 h-2 rounded-full bg-white shadow-sm transition-all duration-300"></div>
                    <div class="dot w-2 h-2 rounded-full bg-white/40 shadow-sm transition-all duration-300"></div>
                </div>
            </div>
        </div>

        <!-- Quote Content -->
        <div class="quote-content px-6 pt-2 pb-4">
            <blockquote class="text-gray-800 text-base md:text-lg leading-relaxed italic font-light mb-3">
                "Hidup itu harus gembira dan penuh inspirasi. Mari kita saling menyemangati! ğŸ’ª"
            </blockquote>

            <!-- Category Badge -->
            <div class="flex items-center justify-between">
                <span class="inline-block bg-purple-100 text-purple-700 px-3 py-1.5 rounded-full text-xs font-semibold">
                    ğŸš€ Motivasi
                </span>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="card-actions px-4 pb-4">
            <div class="flex items-center justify-around border-t border-gray-100 pt-3 gap-2">
                <!-- Like Button -->
                <button class="action-btn like-btn flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all hover:bg-red-50 text-gray-600 flex-1 justify-center"
                        onclick="toggleLike(this)">
                    <span class="text-lg">ğŸ¤</span>
                    <span class="text-sm font-medium">Suka</span>
                </button>

                <!-- Comment Button -->
                <button class="action-btn comment-btn flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all hover:bg-purple-50 text-gray-600 flex-1 justify-center"
                        onclick="openComments()">
                    <span class="text-lg">ğŸ’¬</span>
                    <span class="text-sm font-medium">Komentar</span>
                </button>

                <!-- Share Button -->
                <button class="action-btn share-btn flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all hover:bg-blue-50 text-gray-600 flex-1 justify-center"
                        onclick="shareInspirasi('Hidup itu harus gembira!')">
                    <span class="text-lg">ğŸ”—</span>
                    <span class="text-sm font-medium">Bagikan</span>
                </button>
            </div>
        </div>

        <!-- Bagikan Semangat Button -->
        <div class="px-6 pb-4">
            <button class="bagikan-semangat-btn w-full bg-gradient-to-r from-purple-600 via-pink-600 to-purple-600 hover:from-purple-700 hover:via-pink-700 hover:to-purple-700 text-white px-6 py-3.5 rounded-xl transition-all font-extrabold text-base shadow-lg hover:shadow-xl active:scale-[0.98] disabled:opacity-50"
                    style="text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); letter-spacing: 0.5px;"
                    onclick="bagikanSemangat(this)">
                ğŸš€ Bagikan Semangat
            </button>
        </div>
    </div>

    <!-- ========================================
         TEST 2: Card dengan 1 Foto (No Carousel)
         ======================================== -->
    <div class="inspirasi-card bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300">
        <div class="p-3 bg-gradient-to-r from-green-50 to-blue-50 rounded-t-xl">
            <p class="text-xs font-semibold text-green-700">ğŸ§ª TEST 2: Card dengan 1 Foto (No Carousel)</p>
        </div>

        <!-- Header -->
        <div class="card-header p-4 pb-3 flex items-center justify-between relative" style="z-index: 30;">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full border-2 border-green-500 overflow-hidden flex-shrink-0">
                    <img src="https://ui-avatars.com/api/?name=Abdunnafi+H&background=10B981&color=fff&size=128"
                         alt="ABDUNNAFI H, S.Kom"
                         class="w-full h-full object-cover">
                </div>
                <div>
                    <h3 class="font-semibold text-gray-900 text-sm">ABDUNNAFI H, S.Kom</h3>
                    <p class="text-xs text-gray-500">6 menit yang lalu</p>
                </div>
            </div>

            <div class="flex items-center gap-2">
                <button class="save-btn transition-transform hover:scale-110 text-gray-400 hover:text-yellow-500"
                        onclick="toggleSave(this)">
                    <span class="text-xl">ğŸ”–</span>
                </button>
            </div>
        </div>

        <!-- Photo Section (Single Photo) -->
        <div class="photo-section px-4 pb-3">
            <div class="rounded-lg overflow-hidden" style="height: 320px;">
                <img src="https://images.unsplash.com/photo-1506784365847-bbad939e9335?w=600&h=400&fit=crop"
                     alt="Inspirasi"
                     class="w-full h-full object-cover cursor-pointer hover:opacity-95 transition-opacity"
                     onclick="openPhotoPreview('https://images.unsplash.com/photo-1506784365847-bbad939e9335?w=1200&h=800&fit=crop')"
                     loading="lazy">
            </div>
        </div>

        <!-- Quote Content -->
        <div class="quote-content px-6 pt-2 pb-4">
            <blockquote class="text-gray-800 text-base md:text-lg leading-relaxed italic font-light mb-3">
                "Setiap hari adalah kesempatan baru untuk menjadi lebih baik. Terus semangat! ğŸŒŸ"
            </blockquote>
            <span class="inline-block bg-green-100 text-green-700 px-3 py-1.5 rounded-full text-xs font-semibold">
                ğŸ’ª Gaspul
            </span>
        </div>

        <!-- Action Buttons -->
        <div class="card-actions px-4 pb-4">
            <div class="flex items-center justify-around border-t border-gray-100 pt-3 gap-2">
                <button class="action-btn like-btn flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all hover:bg-red-50 text-gray-600 flex-1 justify-center"
                        onclick="toggleLike(this)">
                    <span class="text-lg">ğŸ¤</span>
                    <span class="text-sm font-medium">Suka</span>
                </button>
                <button class="action-btn comment-btn flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all hover:bg-purple-50 text-gray-600 flex-1 justify-center"
                        onclick="openComments()">
                    <span class="text-lg">ğŸ’¬</span>
                    <span class="text-sm font-medium">Komentar</span>
                </button>
                <button class="action-btn share-btn flex items-center gap-1.5 px-3 py-2 rounded-lg transition-all hover:bg-blue-50 text-gray-600 flex-1 justify-center"
                        onclick="shareInspirasi('Setiap hari adalah kesempatan baru!')">
                    <span class="text-lg">ğŸ”—</span>
                    <span class="text-sm font-medium">Bagikan</span>
                </button>
            </div>
        </div>

        <!-- Bagikan Semangat Button -->
        <div class="px-6 pb-4">
            <button class="bagikan-semangat-btn w-full bg-gradient-to-r from-purple-600 via-pink-600 to-purple-600 hover:from-purple-700 hover:via-pink-700 hover:to-purple-700 text-white px-6 py-3.5 rounded-xl transition-all font-extrabold text-base shadow-lg hover:shadow-xl active:scale-[0.98]"
                    style="text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); letter-spacing: 0.5px;"
                    onclick="bagikanSemangat(this)">
                ğŸš€ Bagikan Semangat
            </button>
        </div>
    </div>

</div>

<!-- Photo Preview Modal (Z-INDEX TERTINGGI) -->
<div id="photoPreviewModal"
     class="hidden fixed inset-0 bg-black/85 backdrop-blur-sm flex items-center justify-center p-4"
     style="z-index: 99999 !important;"
     onclick="closePhotoPreview()">

    <!-- Close Button -->
    <button class="absolute top-4 right-4 text-white hover:text-gray-300 transition-all bg-black/50 rounded-full p-3 hover:bg-black/70 active:scale-95"
            style="z-index: 100000 !important;"
            onclick="closePhotoPreview(); event.stopPropagation();"
            title="Tutup (ESC)">
        <svg class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
    </button>

    <!-- Image Preview -->
    <div class="relative max-w-full max-h-full flex items-center justify-center" onclick="event.stopPropagation()">
        <img id="photoPreviewImg"
             src=""
             alt="Preview"
             class="max-w-[95vw] max-h-[95vh] w-auto h-auto object-contain rounded-lg shadow-2xl"
             style="background: transparent;">
    </div>

    <!-- Mobile Hint -->
    <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 text-white text-xs bg-black/60 px-4 py-2 rounded-full md:hidden">
        ğŸ‘† Ketuk di luar gambar untuk menutup
    </div>
</div>

<!-- JavaScript -->
<script src="card_inspirasi_script.js"></script>
<script>
// Include the same JavaScript from card_component.html.twig
(function() {
    'use strict';

    console.log('ğŸš€ Inspirasi Card Test Page Loaded');

    // PHOTO CAROUSEL NAVIGATION
    window.nextPhoto = function(btn) {
        const wrapper = btn.closest('.photo-carousel-wrapper');
        const container = wrapper.querySelector('.photo-carousel-container');
        const dots = wrapper.querySelectorAll('.dot');
        const current = parseInt(container.dataset.current);
        const next = current === 0 ? 1 : 0;

        container.style.transform = `translateX(-${next * 50}%)`;
        container.dataset.current = next;
        updateDots(dots, next);
    };

    window.prevPhoto = function(btn) {
        const wrapper = btn.closest('.photo-carousel-wrapper');
        const container = wrapper.querySelector('.photo-carousel-container');
        const dots = wrapper.querySelectorAll('.dot');
        const current = parseInt(container.dataset.current);
        const prev = current === 0 ? 1 : 0;

        container.style.transform = `translateX(-${prev * 50}%)`;
        container.dataset.current = prev;
        updateDots(dots, prev);
    };

    function updateDots(dots, activeIndex) {
        dots.forEach((dot, index) => {
            if (index === activeIndex) {
                dot.classList.remove('bg-white/40', 'w-2');
                dot.classList.add('bg-white', 'w-6');
            } else {
                dot.classList.remove('bg-white', 'w-6');
                dot.classList.add('bg-white/40', 'w-2');
            }
        });
    }

    // SWIPE GESTURE SUPPORT
    document.querySelectorAll('.photo-carousel-container').forEach(container => {
        let touchStartX = 0;
        let touchEndX = 0;
        let touchStartTime = 0;

        container.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            touchStartTime = Date.now();
        }, { passive: true });

        container.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].clientX;
            const touchTime = Date.now() - touchStartTime;
            const swipeDistance = touchStartX - touchEndX;

            if (Math.abs(swipeDistance) > 50 && touchTime < 300) {
                const wrapper = container.closest('.photo-carousel-wrapper');
                const nextBtn = wrapper.querySelector('.next-btn');
                const prevBtn = wrapper.querySelector('.prev-btn');

                if (swipeDistance > 0 && nextBtn) {
                    nextBtn.click();
                } else if (swipeDistance < 0 && prevBtn) {
                    prevBtn.click();
                }
            }
        }, { passive: true });
    });

    // PHOTO PREVIEW MODAL
    window.openPhotoPreview = function(photoUrl) {
        const modal = document.getElementById('photoPreviewModal');
        const img = document.getElementById('photoPreviewImg');

        if (modal && img) {
            img.src = photoUrl;
            modal.classList.remove('hidden');
            document.body.classList.add('modal-open');
            console.log('âœ… Modal opened:', photoUrl);
        }
    };

    window.closePhotoPreview = function() {
        const modal = document.getElementById('photoPreviewModal');
        const img = document.getElementById('photoPreviewImg');

        if (modal && img) {
            modal.classList.add('hidden');
            document.body.classList.remove('modal-open');
            setTimeout(() => { img.src = ''; }, 300);
            console.log('âœ… Modal closed');
        }
    };

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closePhotoPreview();
    });

    // MENU DROPDOWN
    window.toggleMenu = function(btn) {
        const dropdown = btn.nextElementSibling;
        document.querySelectorAll('.menu-dropdown').forEach(d => {
            if (d !== dropdown) d.classList.add('hidden');
        });
        dropdown.classList.toggle('hidden');
    };

    document.addEventListener('click', (e) => {
        if (!e.target.closest('.menu-container')) {
            document.querySelectorAll('.menu-dropdown').forEach(d => d.classList.add('hidden'));
        }
    });

    // ACTION BUTTONS
    window.toggleLike = function(btn) {
        const icon = btn.querySelector('span:first-child');
        const text = btn.querySelector('span:last-child');
        const isLiked = icon.textContent === 'â¤ï¸';

        if (isLiked) {
            icon.textContent = 'ğŸ¤';
            text.textContent = 'Suka';
            btn.classList.remove('text-red-500');
            btn.classList.add('text-gray-600');
        } else {
            icon.textContent = 'â¤ï¸';
            text.textContent = 'Disukai';
            btn.classList.remove('text-gray-600');
            btn.classList.add('text-red-500');
        }
        console.log('âœ… Like toggled:', !isLiked);
    };

    window.toggleSave = function(btn) {
        const icon = btn.querySelector('span');
        const isSaved = icon.textContent === 'ğŸ“Œ';

        if (isSaved) {
            icon.textContent = 'ğŸ”–';
            btn.classList.remove('text-yellow-500');
            btn.classList.add('text-gray-400');
        } else {
            icon.textContent = 'ğŸ“Œ';
            btn.classList.remove('text-gray-400');
            btn.classList.add('text-yellow-500');
        }
        console.log('âœ… Save toggled:', !isSaved);
    };

    window.openComments = function() {
        console.log('âœ… Comments clicked');
        alert('ğŸ’¬ Fitur komentar akan segera hadir!');
    };

    window.shareInspirasi = function(text) {
        console.log('âœ… Share clicked');
        if (navigator.share) {
            navigator.share({ title: 'Inspirasi', text: text, url: window.location.href });
        } else {
            navigator.clipboard.writeText(text).then(() => {
                alert('ğŸ“‹ Quote disalin ke clipboard!');
            });
        }
    };

    window.bagikanSemangat = function(btn) {
        console.log('âœ… Bagikan Semangat clicked');
        const originalText = btn.innerHTML;
        btn.disabled = true;
        btn.innerHTML = 'â³ Membagikan...';

        setTimeout(() => {
            btn.disabled = false;
            btn.innerHTML = originalText;
            alert('ğŸ‰ Semangat berhasil dibagikan!');
        }, 1500);
    };

    window.editInspirasi = function() {
        alert('âœï¸ Fitur edit akan segera hadir!');
    };

    window.hapusInspirasi = function() {
        if (confirm('ğŸ—‘ï¸ Hapus inspirasi ini?')) {
            alert('âœ… Inspirasi dihapus!');
        }
    };

    console.log('âœ… All functions loaded successfully');
})();
</script>

</body>
</html>
